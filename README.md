# Purpose

Without having to spin up a whole Sitecore CMS backend in Docker and all that, here's a quick way to get the gist of what it'd look like to spin up a "[headless](https://sitecore.stackexchange.com/a/14598)" content-to-HTML **frontend renderer** using Sitecore's [**.NET** SDK](https://doc.sitecore.com/xp/en/developers/100/developer-tools/sitecore-asp-net-rendering-sdk.html):

# Prereqs

1. Set yourself up a mock "Sitecore Headless Services - Layout Service" API endpoint using [this OpenAPI specification file](.prereqs/mock-sc-layout-service.yml) -- Azure APIM makes it pretty easy.  See [importing](https://learn.microsoft.com/en-us/azure/api-management/import-api-from-oas?tabs=portal) and [mocking](https://learn.microsoft.com/en-us/azure/api-management/mock-api-responses?tabs=azure-portal).
1. In the local copy of this repository that you download, find and replace the phrase `https://YOURMOCKSERVERDOMAIN/sitecore/api/layout/render/jss` with whatever mock endpoint you _actually_ just set up.

# And then...

From the base of this repo's directory:

# Build

```powershell
.\.optional\handy\build-dot-net.ps1
```

# Run

```powershell
./my_output/Handwritten.exe
```

# Exit

<kbd>Ctrl</kbd>+<kbd>c</kbd>

# Between running and exit, try:

## Try

```powershell
curl "http://localhost:5000/api/sayHello"
```

### Expect

```
Hello World
```

## Try

```powershell
curl "http://localhost:5000/debug/routes"
```

### Expect

Something like...

```
Handwritten.Controllers.DefaultController.Index (Handwritten)
Handwritten.Controllers.SayHelloController.Get (Handwritten)
HTTP: GET /debug/routes
Fallback {*path:nonfile}
```

## Try

```powershell
curl "http://localhost:5000/green/pepper"
```

### 

Something like...

```
<div id="MainPanel">
    <div id="CenterColumn">
        <div id="InnerCenter">
            <div id="Header">
                The title is: My Title !!!
            </div>
            <div id="Content">
                The title is dynamic but the body currently is not.
            </div>
            <div id="Footer"><hr class="divider">Â© 2024 Me</div>
        </div>
    </div>
</div>
```

# Wish list - Angular

Continuing the "Microsoft shop" theme, I was going to make an Angular equivalent, but heaven help me, a "basic" Angular app is a lot of lines of code!  Another day, maybe.

I did, however, manage to plug my mock backend into the output of [Sitecore's `create-sitecore-jss angular` command](https://doc.sitecore.com/xp/en/developers/hd/latest/sitecore-headless-development/walkthrough--getting-started-with-jss-for-angular.html#create-the-application) and putz with CORS issues _just_ enough to see that _yes_, I visit `http://localhost:3000`, my browser _does_ try to contact `https://YOURMOCKSERVERDOMAIN/...`.

Strangely, it calls `https://YOURMOCKSERVERDOMAIN/sitecore/api/layout/render/default`, not `.../render/jss`, which is why my [OpenAPI spec](.prereqs/mock-sc-layout-service.yml) has redundant endpoints by 2 different names.

It also tried to call a `.../dictionary/...` endpoint on `YOURMOCKSERVERDOMAIN`, which I didn't take the time to mock up, so that failed.

And also, my mock has absolutely _nothing_ to do with the data model generated by `create-sitecore-jss`, so even if I made it, I'm sure rendering would still fail.

But I was happy to see my web browser developer tools flip from complaining about CORS on `...render/default...` to complaining that `.../dictionary/...` didn't exist.

That seems like enough to go on to suspect that `@sitecore-jss/sitecore-jss-angular` also probably works well.

# Next steps

I'll leave it up to actual Sitecore devs foregoing the Next.js framework in favor of something like .NET or Angular to do all the hard work of getting Experience Editor previews rendering and whatnot.

Have fun!